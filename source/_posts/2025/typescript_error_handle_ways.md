---
title: " [å­¸ç¿’ç­†è¨˜] TypeScript ä¸åŒå¯«æ³•çš„é™¤éŒ¯é›£æ˜“æ¯”è¼ƒ"
date: 2025/05/17 13:23:41
tags:
  - å­¸ç¿’ç­†è¨˜
---

## å‰æƒ…æè¦

æœ€è¿‘åœ¨æ•´ç†ä¸€å€‹å°ˆæ¡ˆçš„ API è·¯ç”±æ¬Šé™è¨­å®šï¼Œ  
å°åŒæ¨£çš„è³‡æ–™çµæ§‹ã€ä¸åŒçš„å¯«æ³•ï¼Œå°æ–¼å‹åˆ¥æª¢æŸ¥å’Œé™¤éŒ¯æœ‰ä¸€é»å°å°å¿ƒå¾—ï¼Œç¨å¾®ä½œå€‹è¨˜éŒ„ã€‚

## æƒ…å¢ƒèªªæ˜

å‡è¨­æˆ‘æœ‰ä¸€å€‹ API æ¬Šé™è¨­å®šå¦‚ä¸‹ï¼Œæ¯å€‹è·¯ç”±å°æ‡‰ä¸€çµ„è§’è‰²æ‰èƒ½è¨ªå•ï¼š

```ts
{
  endpoint: "/admin",
  roles: ["admin", "superuser"]
}
```

ç„¶å¾Œæˆ‘æœ‰ä¸€å€‹å‡½å¼ registerPermissions è¦åƒé€™å€‹è¨­å®šã€‚

### å»ºè­°å¯«æ³•

å…ˆçµ¦æœ€è¿‘å»ºè­°çš„å¯«æ³•ï¼Œå…ˆå®šç¾©å‹åˆ¥ï¼Œç„¶å¾Œè®Šæ•¸ä¹Ÿå¥—å‹åˆ¥
å¥½è™•æ˜¯èƒ½å…·é«”çš„æŠ“åˆ°éŒ¯èª¤ï¼Œå£è™•æ˜¯è¦å¤šè€ƒæ…®ä¸€å€‹å‹åˆ¥(å‘½åã€æ“ºæ”¾ä½ç½®éƒ½æœƒæ˜¯ä¸€å€‹è¦è€ƒé‡çš„é»)

```ts
type PermissionConfig = {
  routes: {
    endpoint: string;
    roles: string[];
  }[];
};

const permissionConfig: PermissionConfig = {
  routes: [
    {
      endpoint: "/admin",
      roles: ["admin", "superuser"],
    },
    {
      endpoint: "/profile",
      roles: "user", // âŒ é¦¬ä¸Šç´…å­—å ±éŒ¯
    },
  ],
};

const registerPermissions = (config: PermissionConfig) => {
  // è¨»å†Šæ¬Šé™é‚è¼¯
};

registerPermissions(permissionConfig);
```

### å…ˆå®šç¾©è®Šæ•¸ï¼Œä½†æ²’å¥—å‹åˆ¥

é€™æ˜¯æœ€ä¸æ¨è–¦çš„å¯«æ³•ã€‚é›–ç„¶å¯«èµ·ä¾†æœ€å¿«ã€æœ€é †æ‰‹ï¼Œä¸ç”¨è€ƒæ…®å‘½åå’Œæª”æ¡ˆæ“ºæ”¾çš„ä½ç½®ï¼Œä½†éŒ¯èª¤è¨Šæ¯æœƒä¸€å¤§å¨ï¼Œé›£ä»¥é–±è®€ã€‚

åœ¨ç¾åœ¨é€™å€‹ AI æ™‚ä»£ï¼Œä¹Ÿè¨± AI èƒ½å¹«ä½ æ›´å¿«ç†è§£éŒ¯èª¤ï¼Œä½†æˆ‘é‚„æ˜¯ä¸å»ºè­°é€™éº¼åšã€‚å› ç‚ºä¸€æ—¦ç¿’æ…£é€™ç¨®å¯«æ³•ï¼Œå¾ˆå®¹æ˜“éŒ¯ä¸ŠåŠ éŒ¯ã€‚å–®ä¸€éŒ¯èª¤ AI é‚„èƒ½ç†è§£ï¼Œä½†éŒ¯ä¸­éŒ¯æ™‚ï¼ŒAI ä¹Ÿå¯èƒ½æœƒæä¸æ¸…æ¥šç‹€æ³ã€‚

```ts
const permissionConfig = {
  routes: [
    {
      endpoint: "/admin",
      roles: ["admin", "superuser"],
    },
    {
      endpoint: "/profile",
      roles: "user", // ğŸ§¨ é€™è£¡æ•…æ„å¯«éŒ¯ï¼Œæ‡‰è©²æ˜¯ array
    },
  ],
};

const registerPermissions = (config: {
  routes: {
    endpoint: string;
    roles: string[];
  }[];
}) => {
  // è¨»å†Šæ¬Šé™é‚è¼¯
};

registerPermissions(permissionConfig);
```

é€™ç¨®å¯«æ³•æœƒå™´å‡ºä¸€å †éŒ¯èª¤ã€‚

### å¯«æ³•ä¸‰ï¼šç›´æ¥ inline å‚³å…¥å‡½å¼

å¦‚æœæ²’æœ‰å…±ç”¨å¿…è¦çš„åƒæ•¸ï¼Œæˆ‘é€šå¸¸æœƒæ¨è–¦ inline å¯«æ³•ã€‚ç•¶ç„¶å‰ææ˜¯é€™å€‹æ–¹æ³•çš„è¤‡é›œåº¦è¦å¤ ä½ï¼Œè®“äººå®¹æ˜“ç†è§£ã€‚é€™æ¨£ä¹Ÿå¯ä»¥çœå»å‘½åå’Œå‹åˆ¥æª”æ¡ˆæ“ºæ”¾ä½ç½®çš„ç…©æƒ±ã€‚

```ts
const registerPermissions = (config: {
  routes: {
    endpoint: string;
    roles: string[];
  }[];
}) => {
  // è¨»å†Šæ¬Šé™é‚è¼¯
};

registerPermissions({
  routes: [
    {
      endpoint: "/admin",
      roles: ["admin", "superuser"],
    },
    {
      endpoint: "/profile",
      roles: "user", // âŒ é¦¬ä¸Šç´…å­—å ±éŒ¯
    },
  ],
});
```

## å°çµï¼šæ¨è–¦å¯«æ³•

æœ€æ¨è–¦ç¬¬ä¸€ç¨®ï¼Œä½†å¯¦å‹™ä¸Šæˆ‘å¯èƒ½æœƒæ›´å¤šçš„é¸æ“‡ç¬¬ä¸‰ç¨®å¯«æ³•ã€‚
è¦æœ‰ä¸Šä¸‹æ–‡ï¼Œè«‹åœ˜éšŠä½œå¥½è‡ªå·²çš„åˆ¤æ–·ã€‚

(fin)
